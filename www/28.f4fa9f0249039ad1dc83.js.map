{"version":3,"sources":["./src/app/pages/opportunity/opp-list/component/filter-opportunity/filter-opportunity.component.html","./src/app/pages/opportunity/opp-list/component/filter-opportunity/filter-opportunity.component.ts","./src/app/pages/opportunity/opp-list/opp-list.page.html","./src/app/pages/opportunity/opp-list/opp-list-routing.module.ts","./src/app/pages/opportunity/opp-list/opp-list.page.ts","./src/app/pages/opportunity/opp-list/opp-list.module.ts"],"names":["FilterOpportunityComponent","modalCtrl","opportunitySrvc","formBuilder","translate","starred","this","getStarredFilterOptions","filterForm","initFilterForm","filterObj","updateForm","reset","group","source","startDate","endDate","withOpenBookings","withPendingTasks","withAppointment","tdStatus","oppStatus","leadStatus","oppSource","starredOpp","emitEvent","dismiss","type","cancel","updateTdStatus","updateOppStatus","updateLeadStatus","apply","routes","path","component","OppListPage","opportunityService","router","loadingCtrl","countryCode","environment","isLoadingRecent","getOpportunities","filter","getOppInfinite","pipe","tap","e","infOpp","next","opp","result","err","subscribe","searchInput","trim","get","mergeMap","lang","from","create","message","loading","present","console","log","warmth","navigate","BASE","Id","Flag","backdropDismiss","animated","cssClass","componentProps","Object","assign","modal","onDidDismiss","res","data","event","concat","target","complete","disabled","showFilter","search","doInfinite","OppListPageRoutingModule","forChild","OppListPageModule"],"mappings":"gUA0Jc,+BAAmE,QAAe,Q,yBAA/D,sBAAgD,uB,yBAOnE,+BAAmE,QAAe,Q,yBAA/D,sBAAgD,uBCnJ1E,Y,MAAMA,EAMX,YACUC,EACAC,EACAC,EACAC,GAHA,KAAAH,YACA,KAAAC,kBACA,KAAAC,cACA,KAAAC,YANV,KAAAC,QAAUC,KAAKJ,gBAAgBK,0BAQ7BD,KAAKE,WAAaF,KAAKG,iBAGzB,WACOH,KAAKI,UAGRJ,KAAKK,aAFLL,KAAKM,QAMD,iBAUN,OATgBN,KAAKH,YAAYU,MAAM,CACrCC,OAAQ,CAAC,IACTT,QAAS,CAAC,IACVU,UAAW,CAAC,IACZC,QAAS,CAAC,IACVC,iBAAkB,EAAC,GACnBC,iBAAkB,EAAC,GACnBC,gBAAiB,EAAC,KAKtB,WAEA,QACEb,KAAKI,UAAY,CACfU,SAAU,MACVC,UAAW,MACXC,WAAY,MACZC,UAAW,GACXC,WAAY,MACZT,UAAW,GACXC,QAAS,GACTC,kBAAkB,EAClBE,iBAAiB,EACjBD,kBAAkB,GAEpBZ,KAAKK,aAGP,aACML,KAAKE,YACPF,KAAKE,WAAWI,MACd,CACEE,OAAQR,KAAKI,UAAUa,UACvBlB,QAASC,KAAKI,UAAUc,WACxBT,UAAWT,KAAKI,UAAUK,UAC1BC,QAASV,KAAKI,UAAUM,QACxBC,iBAAkBX,KAAKI,UAAUO,iBACjCC,iBAAkBZ,KAAKI,UAAUQ,iBACjCC,gBAAiBb,KAAKI,UAAUS,iBAElC,CAAEM,WAAW,IAKnB,QACEnB,KAAKL,UAAUyB,QAAQpB,KAAKI,WAG9B,SACEJ,KAAKL,UAAUyB,UAGjB,cACE,MAAiC,SAA7BpB,KAAKI,UAAUW,UACV,qCAEA,8CAIX,kBACE,MAAgC,aAA5Bf,KAAKI,UAAUU,SACV,uCAEA,gDAIX,gBAAgBO,GAEZrB,KAAKI,UAAUW,UADJ,SAATM,EACyB,OACT,aAATA,EACkB,WACT,QAATA,EACkB,MAEA,MAI/B,iBAAiBA,GAEbrB,KAAKI,UAAUY,WADJ,SAATK,EAC0B,OACV,QAATA,EACmB,MACV,QAATA,EACmB,MAEA,OAIhC,eAAeA,GAEXrB,KAAKI,UAAUU,SADJ,YAATO,EACwB,UACR,aAATA,EACiB,WACR,QAATA,EACiB,MAEA,a,6CA/HnB3B,GAA0B,2C,uBAA1BA,EAA0B,gvCDdvC,uBACE,wBACE,wBACE,uBAAY,+BAAS,EAAA4B,WACnB,qBACF,OACF,OACA,wBACE,uBAAY,+BAAS,EAAAhB,UACnB,Q,oBACF,OACF,OACA,oBAAW,S,qBAA4C,OACzD,OACF,OACA,uBACE,WACE,sBACE,mBACE,qBACE,qBACE,S,qBACF,OACF,OACF,OACA,qBACE,sBAA4B,+BAAS,EAAAiB,eAAe,SAClD,uBAEA,wBACE,S,qBACF,OACF,OACA,sBAA4B,+BAAS,EAAAA,eAAe,aAClD,uBAEA,wBACE,S,qBACF,OACF,OACA,sBAA4B,+BAAS,EAAAA,eAAe,eAClD,uBAEA,wBACE,S,qBACF,OACF,OACA,sBAA4B,+BAAS,EAAAA,eAAe,cAClD,uBAEA,wBACE,S,qBACF,OACF,OACF,OACF,OAEA,uBACE,mBACE,qBACE,qBACE,S,qBACF,OACF,OACF,OACA,qBACE,sBAA4B,+BAAS,EAAAC,gBAAgB,SACnD,uBAEA,wBACE,S,qBACF,OACF,OACA,sBAA4B,+BAAS,EAAAA,gBAAgB,UACnD,uBAEA,wBACE,S,qBACF,OACF,OACA,sBAA4B,+BAAS,EAAAA,gBAAgB,SACnD,uBAEA,wBACE,S,qBACF,OACF,OACA,sBAA4B,+BAAS,EAAAA,gBAAgB,cACnD,uBAEA,wBACE,S,qBACF,OACF,OACF,OACF,OAEA,uBACE,mBACE,qBACE,qBACE,S,qBACF,OACF,OACF,OACA,qBACE,sBAA4B,+BAAS,EAAAC,iBAAiB,SACpD,uBAEA,wBACE,S,qBACF,OACF,OACA,sBAA4B,+BAAS,EAAAA,iBAAiB,SACpD,uBAEA,wBACE,S,qBACF,OACF,OACA,sBAA4B,+BAAS,EAAAA,iBAAiB,UACpD,uBAEA,wBACE,S,qBACF,OACF,OACA,sBAA4B,+BAAS,EAAAA,iBAAiB,UACpD,uBAEA,wBACE,S,qBACF,OACF,OACF,OACF,OAEA,uBACE,mBACE,sBACE,qBACE,S,sBACF,OACF,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","file":"28.f4fa9f0249039ad1dc83.js","sourcesContent":["<ion-header class=\"ion-no-border\">\n  <ion-toolbar color=\"primary\" mode=\"ios\">\n    <ion-buttons slot=\"start\">\n      <ion-button (click)=\"cancel()\">\n        <ion-icon slot=\"icon-only\" name=\"arrow-back\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-buttons slot=\"end\">\n      <ion-button (click)=\"reset()\">\n        {{ 'OpportunityFilter_Reset' | translate }}\n      </ion-button>\n    </ion-buttons>\n    <ion-title>{{ 'OpportunityFilter_Filter' | translate }}</ion-title>\n  </ion-toolbar>\n</ion-header>\n<ion-content>\n  <ng-container [formGroup]=\"filterForm\">\n    <ion-grid class=\"ion-no-margin bg-white ion-padding\">\n      <ion-row>\n        <ion-col size=\"12\">\n          <ion-label>\n            {{ 'OpportunityFilter_TestDriveStatus' | translate }}\n          </ion-label>\n        </ion-col>\n      </ion-row>\n      <ion-row class=\"ion-text-center ion-padding-top\">\n        <ion-col class=\"header-btn\" (click)=\"updateTdStatus('all')\" [class.activated]=\"filterObj.tdStatus === 'all'\">\n          <ion-icon name=\"apps\" [color]=\"filterObj.tdStatus === 'all' ? 'primary' : 'medium'\"></ion-icon>\n\n          <ion-label class=\"mat-small\">\n            {{ 'OpportunityFilter_All' | translate }}\n          </ion-label>\n        </ion-col>\n        <ion-col class=\"header-btn\" (click)=\"updateTdStatus('ongoing')\" [class.activated]=\"filterObj.tdStatus === 'ongoing'\">\n          <ion-icon name=\"play\" [color]=\"filterObj.tdStatus === 'ongoing' ? 'primary' : 'medium'\"></ion-icon>\n\n          <ion-label class=\"mat-small\">\n            {{ 'OpportunityFilter_Ongoing' | translate }}\n          </ion-label>\n        </ion-col>\n        <ion-col class=\"header-btn\" (click)=\"updateTdStatus('completed')\" [class.activated]=\"filterObj.tdStatus === 'completed'\">\n          <ion-icon name=\"checkmark\" [color]=\"filterObj.tdStatus === 'completed' ? 'primary' : 'medium'\"></ion-icon>\n\n          <ion-label class=\"mat-small\">\n            {{ 'OpportunityFilter_Completed' | translate }}\n          </ion-label>\n        </ion-col>\n        <ion-col class=\"header-btn\" (click)=\"updateTdStatus('upcoming')\" [class.activated]=\"filterObj.tdStatus === 'upcoming'\">\n          <ion-icon src=\"{{ getUpcomingIcon() }}\"></ion-icon>\n\n          <ion-label class=\"mat-small\">\n            {{ 'OpportunityFilter_Upcoming' | translate }}\n          </ion-label>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n\n    <ion-grid class=\"ion-no-margin bg-white ion-padding ion-margin-top\">\n      <ion-row>\n        <ion-col size=\"12\">\n          <ion-label>\n            {{ 'OpportunityFilter_OpportunityStatus' | translate }}\n          </ion-label>\n        </ion-col>\n      </ion-row>\n      <ion-row class=\"ion-text-center ion-padding-top\">\n        <ion-col class=\"header-btn\" (click)=\"updateOppStatus('all')\" [class.activated]=\"filterObj.oppStatus === 'all'\">\n          <ion-icon name=\"apps\" [color]=\"filterObj.oppStatus === 'all' ? 'primary' : 'medium'\"></ion-icon>\n\n          <ion-label class=\"mat-small\">\n            {{ 'OpportunityFilter_All' | translate }}\n          </ion-label>\n        </ion-col>\n        <ion-col class=\"header-btn\" (click)=\"updateOppStatus('open')\" [class.activated]=\"filterObj.oppStatus === 'open'\">\n          <ion-icon src=\"{{ getOpenIcon() }}\"></ion-icon>\n\n          <ion-label class=\"mat-small\">\n            {{ 'OpportunityFilter_Open' | translate }}\n          </ion-label>\n        </ion-col>\n        <ion-col class=\"header-btn\" (click)=\"updateOppStatus('won')\" [class.activated]=\"filterObj.oppStatus === 'won'\">\n          <ion-icon name=\"trophy\" [color]=\"filterObj.oppStatus === 'won' ? 'primary' : 'medium'\"></ion-icon>\n\n          <ion-label class=\"mat-small\">\n            {{ 'OpportunityFilter_Won' | translate }}\n          </ion-label>\n        </ion-col>\n        <ion-col class=\"header-btn\" (click)=\"updateOppStatus('deferred')\" [class.activated]=\"filterObj.oppStatus === 'deferred'\">\n          <ion-icon name=\"timer\" [color]=\"filterObj.oppStatus === 'deferred' ? 'primary' : 'medium'\"></ion-icon>\n\n          <ion-label class=\"mat-small\">\n            {{ 'OpportunityFilter_Deferred' | translate }}\n          </ion-label>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n\n    <ion-grid class=\"ion-no-margin bg-white ion-padding ion-margin-top\">\n      <ion-row>\n        <ion-col size=\"12\">\n          <ion-label>\n            {{ 'OpportunityFilter_LeadStatus' | translate }}\n          </ion-label>\n        </ion-col>\n      </ion-row>\n      <ion-row class=\"ion-text-center ion-padding-top\">\n        <ion-col class=\"header-btn\" (click)=\"updateLeadStatus('all')\" [class.activated]=\"filterObj.leadStatus === 'all'\">\n          <ion-icon name=\"apps\" [color]=\"filterObj.leadStatus === 'all' ? 'primary' : 'medium'\"></ion-icon>\n\n          <ion-label class=\"mat-small\">\n            {{ 'OpportunityFilter_All' | translate }}\n          </ion-label>\n        </ion-col>\n        <ion-col class=\"header-btn\" (click)=\"updateLeadStatus('hot')\" [class.activated]=\"filterObj.leadStatus === 'hot'\">\n          <ion-icon name=\"flame\" [color]=\"filterObj.leadStatus === 'hot' ? 'danger' : 'medium'\"></ion-icon>\n\n          <ion-label class=\"mat-small\">\n            {{ 'OpportunityFilter_Hot' | translate }}\n          </ion-label>\n        </ion-col>\n        <ion-col class=\"header-btn\" (click)=\"updateLeadStatus('warm')\" [class.activated]=\"filterObj.leadStatus === 'warm'\">\n          <ion-icon name=\"flame\" [color]=\"filterObj.leadStatus === 'warm' ? 'warning' : 'medium'\"></ion-icon>\n\n          <ion-label class=\"mat-small\">\n            {{ 'OpportunityFilter_Warm' | translate }}\n          </ion-label>\n        </ion-col>\n        <ion-col class=\"header-btn\" (click)=\"updateLeadStatus('cold')\" [class.activated]=\"filterObj.leadStatus === 'cold'\">\n          <ion-icon name=\"flame\" [color]=\"filterObj.leadStatus === 'cold' ? 'secondary' : 'medium'\"></ion-icon>\n\n          <ion-label class=\"mat-small\">\n            {{ 'OpportunityFilter_Cold' | translate }}\n          </ion-label>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n\n    <ion-grid class=\"ion-no-margin bg-white ion-padding ion-margin-top\">\n      <ion-row>\n        <ion-col size=\"6\">\n          <ion-label>\n            {{ 'OpportunityFilter_OpportunitySource' | translate }}\n          </ion-label>\n        </ion-col>\n        <ion-col size=\"6\">\n          <ion-label>\n            {{ 'OpportunityFilter_StarredOpportunity' | translate }}\n          </ion-label>\n        </ion-col>\n      </ion-row>\n      <ion-row>\n        <ion-col size=\"6\">\n          <ion-item lines=\"none\">\n            <ion-select formControlName=\"source\">\n              <ion-select-option [value]=\"opt.value\" *ngFor=\"let opt of sources\">{{ opt.label }}</ion-select-option>\n            </ion-select>\n          </ion-item>\n        </ion-col>\n        <ion-col size=\"6\">\n          <ion-item lines=\"none\">\n            <ion-select formControlName=\"starred\">\n              <ion-select-option [value]=\"opt.value\" *ngFor=\"let opt of starred\">{{ opt.label }}</ion-select-option>\n            </ion-select>\n          </ion-item>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n\n    <ion-grid class=\"ion-no-margin bg-white ion-padding ion-margin-top\">\n      <ion-row>\n        <ion-col size=\"6\">\n          <ion-label>\n            {{ 'OpportunityFilter_StartDate' | translate }}\n          </ion-label>\n        </ion-col>\n        <ion-col size=\"6\">\n          <ion-label>\n            {{ 'OpportunityFilter_EndDate' | translate }}\n          </ion-label>\n        </ion-col>\n      </ion-row>\n      <ion-row>\n        <ion-col size=\"6\">\n          <ion-item lines=\"none\">\n            <ion-datetime displayFormat=\"MMM DD YYYY\" formControlName=\"startDate\"></ion-datetime>\n          </ion-item>\n        </ion-col>\n        <ion-col size=\"6\">\n          <ion-item lines=\"none\">\n            <ion-datetime displayFormat=\"MMM DD YYYY\" formControlName=\"endDate\"></ion-datetime>\n          </ion-item>\n        </ion-col>\n      </ion-row>\n    </ion-grid>\n\n    <ion-list class=\"ion-margin-top\">\n      <ion-item button class=\"ion-padding-start\">\n        <ion-label>\n          {{ 'OpportunityFilter_WithOpenBookings' | translate }}\n        </ion-label>\n        <ion-checkbox slot=\"start\" formControlName=\"withOpenBookings\"></ion-checkbox>\n      </ion-item>\n      <ion-item button class=\"ion-padding-start\">\n        <ion-label>\n          {{ 'OpportunityFilter_WithPendingTasks' | translate }}\n        </ion-label>\n        <ion-checkbox slot=\"start\" formControlName=\"withPendingTasks\"></ion-checkbox>\n      </ion-item>\n      <ion-item button lines=\"none\" class=\"ion-padding-start\">\n        <ion-label>\n          {{ 'OpportunityFilter_WithScheduledAppointments' | translate }}\n        </ion-label>\n        <ion-checkbox slot=\"start\" formControlName=\"withAppointment\"></ion-checkbox>\n      </ion-item>\n    </ion-list>\n  </ng-container>\n</ion-content>\n<ion-footer class=\"ion-padding\">\n  <ion-button fill=\"solid\" expand=\"block\" color=\"primary\" (click)=\"apply()\">\n    {{ 'Common_Apply' | translate }}\n  </ion-button>\n</ion-footer>\n","import { Component, OnInit, Input } from '@angular/core';\nimport { ModalController } from '@ionic/angular';\nimport { SelectOption } from 'src/app/models/common/select-option.model';\nimport { CommonOpportunityService } from 'src/app/services/common/opportunity/opportunity.service';\nimport { TranslateService } from '@ngx-translate/core';\nimport { OppFilterModel } from 'src/app/models/common/filter.model';\nimport { FormGroup, FormBuilder } from '@angular/forms';\nimport { FormErrorMessages } from 'src/app/models/common/form-error.model';\n\n@Component({\n  selector: 'app-filter-opportunity',\n  templateUrl: './filter-opportunity.component.html',\n  styleUrls: ['./filter-opportunity.component.scss'],\n})\nexport class FilterOpportunityComponent implements OnInit {\n  filterForm: FormGroup;\n  @Input() filterObj: OppFilterModel;\n  sources: SelectOption[];\n  starred = this.opportunitySrvc.getStarredFilterOptions();\n\n  constructor(\n    private modalCtrl: ModalController,\n    private opportunitySrvc: CommonOpportunityService,\n    private formBuilder: FormBuilder,\n    private translate: TranslateService\n  ) {\n    this.filterForm = this.initFilterForm();\n  }\n\n  ngOnInit() {\n    if (!this.filterObj) {\n      this.reset();\n    } else {\n      this.updateForm();\n    }\n  }\n\n  private initFilterForm(): FormGroup {\n    const oppForm = this.formBuilder.group({\n      source: [''],\n      starred: [''],\n      startDate: [''],\n      endDate: [''],\n      withOpenBookings: [false],\n      withPendingTasks: [false],\n      withAppointment: [false],\n    });\n    return oppForm;\n  }\n\n  getData() {}\n\n  reset() {\n    this.filterObj = {\n      tdStatus: 'all',\n      oppStatus: 'all',\n      leadStatus: 'all',\n      oppSource: '',\n      starredOpp: 'All',\n      startDate: '',\n      endDate: '',\n      withOpenBookings: false,\n      withAppointment: false,\n      withPendingTasks: false,\n    };\n    this.updateForm();\n  }\n\n  updateForm() {\n    if (this.filterForm) {\n      this.filterForm.reset(\n        {\n          source: this.filterObj.oppSource,\n          starred: this.filterObj.starredOpp,\n          startDate: this.filterObj.startDate,\n          endDate: this.filterObj.endDate,\n          withOpenBookings: this.filterObj.withOpenBookings,\n          withPendingTasks: this.filterObj.withPendingTasks,\n          withAppointment: this.filterObj.withAppointment,\n        },\n        { emitEvent: true }\n      );\n    }\n  }\n\n  apply() {\n    this.modalCtrl.dismiss(this.filterObj);\n  }\n\n  cancel() {\n    this.modalCtrl.dismiss();\n  }\n\n  getOpenIcon() {\n    if (this.filterObj.oppStatus === 'open') {\n      return 'assets/icon/opportunity/unlock.svg';\n    } else {\n      return 'assets/icon/opportunity/unlock-disabled.svg';\n    }\n  }\n\n  getUpcomingIcon() {\n    if (this.filterObj.tdStatus === 'upcoming') {\n      return 'assets/icon/opportunity/upcoming.svg';\n    } else {\n      return 'assets/icon/opportunity/upcoming-disabled.svg';\n    }\n  }\n\n  updateOppStatus(type: string) {\n    if (type === 'open') {\n      this.filterObj.oppStatus = 'open';\n    } else if (type === 'deferred') {\n      this.filterObj.oppStatus = 'deferred';\n    } else if (type === 'all') {\n      this.filterObj.oppStatus = 'all';\n    } else {\n      this.filterObj.oppStatus = 'won';\n    }\n  }\n\n  updateLeadStatus(type: string) {\n    if (type === 'cold') {\n      this.filterObj.leadStatus = 'cold';\n    } else if (type === 'hot') {\n      this.filterObj.leadStatus = 'hot';\n    } else if (type === 'all') {\n      this.filterObj.leadStatus = 'all';\n    } else {\n      this.filterObj.leadStatus = 'warm';\n    }\n  }\n\n  updateTdStatus(type: string) {\n    if (type === 'ongoing') {\n      this.filterObj.tdStatus = 'ongoing';\n    } else if (type === 'upcoming') {\n      this.filterObj.tdStatus = 'upcoming';\n    } else if (type === 'all') {\n      this.filterObj.tdStatus = 'all';\n    } else {\n      this.filterObj.tdStatus = 'completed';\n    }\n  }\n}\n","<ion-header class=\"ion-no-border\">\n  <ion-toolbar color=\"primary\" mode=\"ios\">\n    <ion-buttons slot=\"end\">\n      <ion-button (click)=\"showFilter()\">\n        <ion-icon slot=\"icon-only\" name=\"funnel\"></ion-icon>\n      </ion-button>\n    </ion-buttons>\n    <ion-title>{{\"OpportunityTab_Opportunity\"|translate}}</ion-title>\n  </ion-toolbar>\n  <ion-toolbar>\n    <ion-searchbar\n      class=\"ion-margin-top\"\n      search-icon=\"\"\n      debounce=\"500\"\n      [(ngModel)]=\"searchInput\"\n      placeholder=\"{{'OpportunityTab_Search'|translate}}\"\n      (ionChange)=\"search()\"\n    >\n    </ion-searchbar>\n  </ion-toolbar>\n</ion-header>\n<ion-content>\n  <ion-item *ngIf=\"isLoadingRecent\" class=\"ion-text-center\" lines=\"none\">\n    <ion-label class=\"ion-text-center\">\n      <ion-spinner></ion-spinner>\n    </ion-label>\n  </ion-item>\n  <ion-grid class=\"ion-margin border-radius\" *ngIf=\"opp\">\n    <ion-row class=\"ion-margin-bottom\" *ngFor=\"let item of opp\" (click)=\"goToOpportunity(item)\">\n      <ion-col>\n        <ion-text class=\"ion-margin-bottom\">\n          <ion-label color=\"primary\"><b>{{ item?.Type }}</b></ion-label\n          ><br />\n          <ion-label color=\"primary\">{{ item?.ContactName }}</ion-label>\n        </ion-text>\n        <div class=\"bottom-icon\">\n          <ion-icon name=\"flame\" color=\"{{ getColor(item?.Warmth) }}\" *ngIf=\"item?.Type === 'OPEN' && countryCode === 'my'\"></ion-icon>\n          <ion-icon class=\"big-icon\" name=\"{{ getFavIcon(item) }}\" color=\"primary\" *ngIf=\"countryCode === 'my'\"></ion-icon>\n        </div>\n      </ion-col>\n      <ion-col class=\"ion-text-start\">\n        <!-- <div *ngFor=\"let model of item?.ModelInterest\">\n            <ion-label> {{ model?.label }} </ion-label>\n            <br />\n          </div> -->\n        <ion-label>{{ item?.Source }}</ion-label><br />\n        <ion-label> {{ item?.CreatedDate | date: \"dd MMM y h:mm a\" }} </ion-label>\n        <br />\n      </ion-col>\n    </ion-row>\n  </ion-grid>\n\n  <ion-infinite-scroll (ionInfinite)=\"doInfinite($event)\">\n    <ion-infinite-scroll-content loadingSpinner=\"bubbles\" loadingText=\"Loading more data...\"></ion-infinite-scroll-content>\n  </ion-infinite-scroll>\n</ion-content>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { OppListPage } from './opp-list.page';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: OppListPage,\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class OppListPageRoutingModule {}\n","import { Component, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { LoadingController, ModalController } from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { from, Observable } from 'rxjs';\nimport { mergeMap, tap } from 'rxjs/operators';\nimport { OppFilterModel } from 'src/app/models/common/filter.model';\nimport { InfiniteScrollModel } from 'src/app/models/common/infinite-scroll.model';\nimport { Opportunity } from 'src/app/models/common/opportunity.model';\nimport { CommonOpportunityService } from 'src/app/services/common/opportunity/opportunity.service';\nimport { environment } from 'src/environments/environment';\nimport { OpportunityDetailsPageRoutingKeys } from '../../opportunity/opportunity-details/opportunity-details-routing.keys';\nimport { FilterOpportunityComponent } from './component/filter-opportunity/filter-opportunity.component';\n\n@Component({\n  selector: 'app-opp-list',\n  templateUrl: './opp-list.page.html',\n  styleUrls: ['./opp-list.page.scss'],\n})\nexport class OppListPage implements OnInit {\n  infOpp: Observable<InfiniteScrollModel<Opportunity[]>>;\n  searchInput: string;\n  opp: Opportunity[];\n  filterObj: OppFilterModel;\n  countryCode = environment.countryCode;\n  isLoadingRecent = false;\n\n  constructor(\n    private opportunityService: CommonOpportunityService,\n    private router: Router,\n    private modalCtrl: ModalController,\n    private translate: TranslateService,\n    private loadingCtrl: LoadingController\n  ) {}\n\n  ngOnInit() {\n    this.getOpportunities(null);\n  }\n\n  getOpportunities(filter: OppFilterModel) {\n    this.isLoadingRecent = true;\n    this.opportunityService\n      .getOppInfinite()\n      .pipe(\n        tap(\n          (e) => {\n            this.infOpp = e.next;\n            this.opp = e.result;\n            this.isLoadingRecent = false;\n          },\n          (err) => {\n            this.isLoadingRecent = false;\n          }\n        )\n      )\n      .subscribe();\n  }\n\n  search() {\n    if (this.searchInput && this.searchInput.trim()) {\n      this.translate\n        .get('Common_Loading')\n        .pipe(\n          mergeMap((lang) => {\n            return from(\n              this.loadingCtrl.create({\n                message: lang,\n              })\n            );\n          }),\n          mergeMap((loading) => {\n            loading.present();\n            return this.opportunityService.getOppInfinite(this.searchInput).pipe(\n              tap(\n                (e) => {\n                  this.infOpp = e.next;\n                  this.opp = e.result;\n                  console.log(this.opp);\n                  loading.dismiss();\n                },\n                (err) => {\n                  loading.dismiss();\n                }\n              )\n            );\n          })\n        )\n        .subscribe();\n    } else {\n      this.getOpportunities(null);\n    }\n  }\n\n  getColor(warmth: number) {\n    if (warmth === 100) {\n      return 'danger';\n    } else if (warmth < 1) {\n      return 'secondary';\n    } else {\n      return 'warning';\n    }\n  }\n\n  goToOpportunity(opp: Opportunity) {\n    this.router.navigate([`${OpportunityDetailsPageRoutingKeys.BASE}/` + opp.Id]);\n  }\n\n  getFavIcon(opp: Opportunity) {\n    if (opp.Flag) {\n      return 'star';\n    } else {\n      return 'star-outline';\n    }\n  }\n\n  showFilter() {\n    from(\n      this.modalCtrl.create({\n        component: FilterOpportunityComponent,\n        backdropDismiss: false,\n        animated: true,\n        cssClass: 'full-screen',\n        componentProps: {\n          filterObj: this.filterObj ? Object.assign({}, this.filterObj) : null,\n        },\n      })\n    ).subscribe((modal) => {\n      from(modal.onDidDismiss()).subscribe((res: any) => {\n        if (res && res.data) {\n          this.filterObj = res.data;\n          this.getOpportunities(this.filterObj);\n        }\n      });\n      modal.present();\n    });\n  }\n\n  doInfinite(event) {\n    if (!this.infOpp) {\n      event.target.disabled = true;\n      return;\n    }\n    this.infOpp.subscribe(\n      (res) => {\n        this.opp = this.opp.concat(res.result);\n        this.infOpp = res.next;\n        event.target.complete();\n      },\n      (err) => {\n        // this.errService.logError(err);\n        // this.errService.presentServerErr(err);\n      }\n    );\n    // this.infOpp.next.pipe(\n    //   tap((res) => {\n    //     if (res.result) {\n    //       this.opp.push(...res.result);\n    //       this.infOpp = res;\n    //     } else {\n    //       event.target.disabled = true;\n    //     }\n    //   })\n    // ).subscribe();\n    // event.target.complete();\n  }\n}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { IonicModule } from '@ionic/angular';\nimport { TranslateModule } from '@ngx-translate/core';\nimport { FilterOpportunityComponent } from './component/filter-opportunity/filter-opportunity.component';\nimport { OppListPageRoutingModule } from './opp-list-routing.module';\nimport { OppListPage } from './opp-list.page';\n\n@NgModule({\n  imports: [CommonModule, FormsModule, ReactiveFormsModule, IonicModule, OppListPageRoutingModule, TranslateModule],\n  declarations: [OppListPage, FilterOpportunityComponent],\n})\nexport class OppListPageModule {}\n"],"sourceRoot":"webpack:///"}